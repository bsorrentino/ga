!function(){"use strict";function a(a){a&&(a.setTargetAtTime||(a.setTargetAtTime=a.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var b=this.internal_createGain();return a(b.gain),b},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(b){var c=b?this.internal_createDelay(b):this.internal_createDelay();return a(c.delayTime),c},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var b=this.internal_createBufferSource();return b.start||(b.start=function(a,b,c){b||c?this.noteGrainOn(a,b,c):this.noteOn(a)}),b.stop||(b.stop=b.noteOff),a(b.playbackRate),b},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var b=this.internal_createDynamicsCompressor();return a(b.threshold),a(b.knee),a(b.ratio),a(b.reduction),a(b.attack),a(b.release),b},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var b=this.internal_createBiquadFilter();return a(b.frequency),a(b.detune),a(b.Q),a(b.gain),b},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var b=this.internal_createOscillator();return b.start||(b.start=b.noteOn),b.stop||(b.stop=b.noteOff),a(b.frequency),a(b.detune),b}))}(window),function(a){"use strict";function b(b,c){var d=a.createEvent("Event");d.initEvent(b,!0,!1),c.dispatchEvent(d)}function c(c){a[i.enabled]=a[e.enabled],a[i.element]=a[e.element],b(i.events.change,c.target)}function d(a){b(i.events.error,a.target)}var e,f,g=!0,h={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},i=h.w3;for(f in h)if(h[f].enabled in a){e=h[f];break}return!g||i.enabled in a||!e||(a.addEventListener(e.events.change,c,!1),a.addEventListener(e.events.error,d,!1),a[i.enabled]=a[e.enabled],a[i.element]=a[e.element],a[i.exit]=a[e.exit],Element.prototype[i.request]=function(){return this[e.request].apply(this,arguments)}),e}(document),GA=GA||{},GA.plugins=function(a){function b(a){a.x+=0|a.vx,a.y+=0|a.vy}function c(a,b){var c,d,e={},f={},g={},h=a.mass||1;b.lx=b.y,b.ly=-b.x,b.magnitude=Math.sqrt(b.x*b.x+b.y*b.y),b.dx=b.x/b.magnitude,b.dy=b.y/b.magnitude,c=a.vx*b.dx+a.vy*b.dy,e.vx=c*b.dx,e.vy=c*b.dy,d=a.vx*(b.lx/b.magnitude)+a.vy*(b.ly/b.magnitude),f.vx=d*(b.lx/b.magnitude),f.vy=d*(b.ly/b.magnitude),f.vx*=-1,f.vy*=-1,g.x=e.vx+f.vx,g.y=e.vy+f.vy,a.vx=g.x/h,a.vy=g.y/h}a.move=function(a){if(a instanceof Array==!1)b(a);else for(var c=0;c<a.length;c++)b(a[c])},a.distance=function(a,b){var c=b.centerX-a.centerX,d=b.centerY-a.centerY;return Math.sqrt(c*c+d*d)},a.followEase=function(a,b,c){var d=b.centerX-a.centerX,e=b.centerY-a.centerY,f=Math.sqrt(d*d+e*e);f>=1&&(a.x+=d*c,a.y+=e*c)},a.followConstant=function(a,b,c){var d=b.centerX-a.centerX,e=b.centerY-a.centerY,f=Math.sqrt(d*d+e*e);f>=c&&(a.x+=d/f*c,a.y+=e/f*c)},a.rotateAroundSprite=function(a,b,c,d){a.x=b.centerX-a.parent.x+c*Math.cos(d)-a.halfWidth,a.y=b.centerY-a.parent.y+c*Math.sin(d)-a.halfWidth},a.rotateAroundPoint=function(a,b,c,d,e){var f={};return f.x=a+Math.cos(e)*c,f.y=b+Math.sin(e)*d,f},a.angle=function(a,b){return Math.atan2(b.centerY-a.centerY,b.centerX-a.centerX)},a.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},a.randomFloat=function(a,b){return a+Math.random()*(b-a)},a.wait=function(a,b){return setTimeout(b,a)},a.worldCamera=function(a,b){var c={width:b.width,height:b.height,_x:0,_y:0,get x(){return this._x},set x(b){this._x=b,a.x=-this._x,a._previousX=a.x},get y(){return this._y},set y(b){this._y=b,a.y=-this._y,a._previousY=a.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow:function(b){b.x<this.leftInnerBoundary&&(this.x=b.x-this.width/4),b.y<this.topInnerBoundary&&(this.y=b.y-this.height/4),b.x+b.width>this.rightInnerBoundary&&(this.x=b.x+b.width-this.width/4*3),b.y+b.height>this.bottomInnerBoundary&&(this.y=b.y+b.height-this.height/4*3),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>a.width&&(this.x=a.width-this.width),this.y+this.height>a.height&&(this.y=a.height-this.height)},centerOver:function(a){this.x=a.x+a.halfWidth-this.width/2,this.y=a.y+a.halfHeight-this.height/2}};return c},a.scaleToWindow=function(b){b=b||"#2C3539";var c,d,e,f;c=window.innerWidth/a.canvas.width,d=window.innerHeight/a.canvas.height,e=Math.min(c,d),a.canvas.style.transformOrigin="0 0",a.canvas.style.transform="scale("+e+")",f=a.canvas.width>a.canvas.height?a.canvas.width*e<window.innerWidth?"horizontally":"vertically":a.canvas.height*e<window.innerHeight?"vertically":"horizontally";var g;"horizontally"===f&&(g=(window.innerWidth-a.canvas.width*e)/2,a.canvas.style.marginLeft=g+"px",a.canvas.style.marginRight=g+"px"),"vertically"===f&&(g=(window.innerHeight-a.canvas.height*e)/2,a.canvas.style.marginTop=g+"px",a.canvas.style.marginBottom=g+"px"),a.canvas.style.paddingLeft=0,a.canvas.style.paddingRight=0,a.canvas.style.paddingTop=0,a.canvas.style.paddingBottom=0,a.canvas.style.display="block",document.body.style.backgroundColor=b,a.pointer.scale=e,a.scale=e,a.canvas.scaled=!0;var h=navigator.userAgent.toLowerCase();-1!=h.indexOf("safari")&&(h.indexOf("chrome")>-1||(a.canvas.style.maxHeight="100%",a.canvas.style.minHeight="100%"))},a.scaleToFit=function(b,c){var d,e,f;"width"===b&&(d=a.canvas.width/window.innerWidth,e=a.canvas.height/window.innerHeight),"height"===b&&(d=window.innerWidth/a.canvas.width,e=window.innerHeight/a.canvas.height),f=Math.min(d,e),a.canvas.style.transformOrigin="0 0",a.canvas.style.transform="scale("+f+")",document.body.style.backgroundColor=c,a.canvas.style.paddingLeft=0,a.canvas.style.paddingRight=0,a.canvas.style.marginLeft="auto",a.canvas.style.marginRight="auto",a.canvas.style.display="block",a.canvas.style.minHeight="100%";var g=navigator.userAgent.toLowerCase();-1!=g.indexOf("safari")&&(g.indexOf("chrome")>-1||(a.canvas.style.maxHeight="100%",a.canvas.style.minHeight="100%")),a.scale=f},a.shakingSprites=[],a.updateShakingSprites=function(){if(a.shakingSprites.length>0)for(var b=a.shakingSprites.length-1;b>=0;b--){var c=a.shakingSprites[b];c.updateShake&&c.updateShake()}},a.updateFunctions.push(a.updateShakingSprites),a.shake=function(b,c,d){function e(){h>g&&(b.x=i,b.y=j,c-=l,b.x+=m(-c,c),b.y+=m(-c,c),g+=1),g>=h&&(b.x=i,b.y=j,a.shakingSprites.splice(a.shakingSprites.indexOf(b),1))}function f(){h>g&&(b.rotation=k,c-=l,b.rotation=c*n,g+=1,n*=-1),g>=h&&(b.rotation=k,a.shakingSprites.splice(a.shakingSprites.indexOf(b),1))}void 0===c&&(c=16),void 0===d&&(d=!1);var g=1,h=10,i=b.x,j=b.y,k=b.rotation,l=c/h,m=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};-1===a.shakingSprites.indexOf(b)&&(a.shakingSprites.push(b),b.updateShake=function(){d?f():e()});var n=1},a.tweens=[],a.updateTweens=function(){if(a.tweens.length>0)for(var b=a.tweens.length-1;b>=0;b--){var c=a.tweens[b];c&&c.update()}},a.updateFunctions.push(a.updateTweens),a.cubicBezier=function(a,b,c,d,e){var f=a*a,g=f*a;return b+(3*-b+a*(3*b-b*a))*a+(3*c+a*(-6*c+3*c*a))*a+(3*d-3*d*a)*f+e*g};var d={linear:function(a){return a},smoothstep:function(a){return a*a*(3-2*a)},smoothstepSquared:function(a){return Math.pow(a*a*(3-2*a),2)},smoothstepCubed:function(a){return Math.pow(a*a*(3-2*a),3)},acceleration:function(a){return a*a},accelerationCubed:function(a){return Math.pow(a*a,3)},deceleration:function(a){return 1-Math.pow(1-a,2)},decelerationCubed:function(a){return 1-Math.pow(1-a,3)},sine:function(a){return Math.sin(a*Math.PI/2)},sineSquared:function(a){return Math.pow(Math.sin(a*Math.PI/2),2)},sineCubed:function(a){return Math.pow(Math.sin(a*Math.PI/2),2)},inverseSine:function(a){return 1-Math.sin((1-a)*Math.PI/2)},inverseSineSquared:function(a){return 1-Math.pow(Math.sin((1-a)*Math.PI/2),2)},inverseSineCubed:function(a){return 1-Math.pow(Math.sin((1-a)*Math.PI/2),3)},spline:function(a,b,c,d,e){return.5*(2*c+(-b+d)*a+(2*b-5*c+4*d-e)*a*a+(-b+3*c-3*d+e)*a*a*a)}};a.tweenProperty=function(b,c,e,f,g,h,i,j){void 0===g&&(g=60),void 0===h&&(h="smoothstep"),void 0===i&&(i=!1),void 0===j&&(j=0);var k={},l=h.split(" ");return"bounce"===l[0]&&(k.startMagnitude=parseInt(l[1]),k.endMagnitude=parseInt(l[2])),k.start=function(b,c){k.startValue=JSON.parse(JSON.stringify(b)),k.endValue=JSON.parse(JSON.stringify(c)),k.playing=!0,k.totalFrames=g,k.frameCounter=0,a.tweens.push(k)},k.start(e,f),k.update=function(){var a;if(k.playing)if(k.frameCounter<k.totalFrames){var e=k.frameCounter/k.totalFrames;a="bounce"!==l[0]?d[h](e):d.spline(e,k.startMagnitude,0,1,k.endMagnitude),b[c]=k.endValue*a+k.startValue*(1-a),k.frameCounter+=1}else k.end()},k.end=function(){k.playing=!1,k.onComplete&&k.onComplete(),a.tweens.splice(a.tweens.indexOf(k),1),i&&a.wait(j,function(){k.start(k.endValue,k.startValue)})},k.play=function(){k.playing=!0},k.pause=function(){k.playing=!1},k},a.fadeOut=function(b,c){return void 0===c&&(c=60),a.tweenProperty(b,"alpha",b.alpha,0,c,"sine")},a.fadeIn=function(b,c){return void 0===c&&(c=60),a.tweenProperty(b,"alpha",b.alpha,1,c,"sine")},a.pulse=function(b,c,d){return void 0===c&&(c=60),void 0===d&&(d=0),a.tweenProperty(b,"alpha",b.alpha,d,c,"smoothstep",!0)},a.makeTween=function(b){var c={};c.tweens=[],b.forEach(function(b){var d=a.tweenProperty(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);c.tweens.push(d)});var d=0;return c.completed=function(){d+=1,d===c.tweens.length&&(c.onComplete&&c.onComplete(),d=0)},c.tweens.forEach(function(a){a.onComplete=function(){c.completed()}}),c.pause=function(){c.tweens.forEach(function(a){a.playing=!1})},c.play=function(){c.tweens.forEach(function(a){a.playing=!0})},c},a.slide=function(b,c,d,e,f,g,h){return void 0===e&&(e=60),void 0===f&&(f="smoothstep"),void 0===g&&(g=!1),void 0===h&&(h=0),a.makeTween([[b,"x",b.x,c,e,f,g,h],[b,"y",b.y,d,e,f,g,h]])},a.breathe=function(b,c,d,e,f,g){return void 0===e&&(e=60),void 0===f&&(f=!0),void 0===g&&(g=0),a.makeTween([[b,"scaleX",b.scaleX,c,e,"smoothstepSquared",f,g],[b,"scaleY",b.scaleY,d,e,"smoothstepSquared",f,g]])},a.scale=function(b,c,d,e){return void 0===e&&(e=60),a.makeTween([[b,"scaleX",b.scaleX,c,e,"smoothstep",!1],[b,"scaleY",b.scaleY,d,e,"smoothstep",!1]])},a.strobe=function(b,c,d,e,f,g,h){void 0===c&&(c=1.3),void 0===d&&(d=10),void 0===e&&(e=20),void 0===f&&(f=10),void 0===g&&(g=!0),void 0===h&&(h=0);var i="bounce "+d+" "+e;return a.makeTween([[b,"scaleX",b.scaleX,c,f,i,g,h],[b,"scaleY",b.scaleY,c,f,i,g,h]])},a.wobble=function(b,c,d,e,f,g,h,i,j,k,l){void 0===c&&(c=1.2),void 0===d&&(d=1.2),void 0===e&&(e=10),void 0===f&&(f=10),void 0===g&&(g=10),void 0===h&&(h=-10),void 0===i&&(i=-10),void 0===j&&(j=.98),void 0===k&&(k=!0),void 0===l&&(l=0);var m="bounce "+f+" "+g,n="bounce "+h+" "+i,o=a.makeTween([[b,"scaleX",b.scaleX,c,e,m,k,l],[b,"scaleY",b.scaleY,d,e,n,k,l]]);return o.tweens.forEach(function(b){b.onComplete=function(){b.endValue>1&&(b.endValue*=j,b.endValue<=1&&(b.endValue=1,a.removeTween(b)))}}),o},a.removeTween=function(b){b.tweens?(b.pause(),b.tweens.forEach(function(b){a.tweens.splice(a.tweens.indexOf(b),1)})):(b.pause(),a.tweens.splice(a.tweens.indexOf(b),1))},a.followCurve=function(b,c,e,f,g,h){void 0===f&&(f="smoothstep"),void 0===g&&(g=!1),void 0===h&&(h=0);var i={},j=f.split(" ");return"bounce"===j[0]&&(i.startMagnitude=parseInt(j[1]),i.endMagnitude=parseInt(j[2])),i.start=function(b){i.playing=!0,i.totalFrames=e,i.frameCounter=0,i.pointsArray=JSON.parse(JSON.stringify(b)),a.tweens.push(i)},i.start(c),i.update=function(){var c,e,g=i.pointsArray;i.playing&&(i.frameCounter<i.totalFrames?(c=i.frameCounter/i.totalFrames,e="bounce"!==j[0]?d[f](c):d.spline(c,i.startMagnitude,0,1,i.endMagnitude),b.x=a.cubicBezier(e,g[0][0],g[1][0],g[2][0],g[3][0]),b.y=a.cubicBezier(e,g[0][1],g[1][1],g[2][1],g[3][1]),i.frameCounter+=1):i.end())},i.end=function(){i.playing=!1,i.onComplete&&i.onComplete(),a.tweens.splice(a.tweens.indexOf(i),1),g&&a.wait(h,function(){i.pointsArray=i.pointsArray.reverse(),i.start(i.pointsArray)})},i.pause=function(){i.playing=!1},i.play=function(){i.playing=!0},i},a.walkPath=function(b,c,d,e,f,g,h){function i(c){var d=a.makeTween([[b,"x",j[c][0],j[c+1][0],k,e],[b,"y",j[c][1],j[c+1][1],k,e]]);return d.onComplete=function(){c+=1,c<j.length-1?a.wait(h,function(){d=i(c)}):f&&(g&&j.reverse(),a.wait(h,function(){c=0,b.x=j[0][0],b.y=j[0][1],d=i(c)}))},d}void 0===d&&(d=300),void 0===e&&(e="smoothstep"),void 0===f&&(f=!1),void 0===g&&(g=!1),void 0===h&&(h=0);var j=JSON.parse(JSON.stringify(c)),k=d/j.length,l=0,m=i(l);return m},a.walkCurve=function(b,c,d,e,f,g,h){function i(d){var k=a.followCurve(b,c[d],j,e);return k.onComplete=function(){d+=1,d<c.length?a.wait(h,function(){k=i(d)}):f&&(g&&(c.reverse(),c.forEach(function(a){a.reverse()})),a.wait(h,function(){d=0,b.x=c[0][0],b.y=c[0][1],k=i(d)}))},k}void 0===d&&(d=300),void 0===e&&(e="smoothstep"),void 0===f&&(f=!1),void 0===g&&(g=!1),void 0===h&&(h=0);var j=d/c.length,k=0,l=i(k);return l},a.shoot=function(a,b,c,d,e,f){var g=f();return g.x=a.centerX-g.halfWidth+c*Math.cos(b),g.y=a.centerY-g.halfHeight+c*Math.sin(b),g.vx=Math.cos(b)*d,g.vy=Math.sin(b)*d,e.push(g),g},a.grid=function(b,c,d,e,f,g,h,i,j){void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=32),void 0===e&&(e=32),void 0===g&&(g=0),void 0===h&&(h=0),void 0===f&&(f=!1);var k=a.group();return k.createGrid=function(){for(var a=b*c,l=0;a>l;l++){var m=l%b*d,n=Math.floor(l/b)*e,o=i();k.addChild(o),f?(o.x=m+d/2-o.halfWidth+g,o.y=n+e/2-o.halfHeight+h):(o.x=m+g,o.y=n+h),j&&j(o)}},k.createGrid(),a.stage.addChild(k),k},a.progressBar={maxWidth:0,height:0,backgroundColor:"gray",foregroundColor:"cyan",backBar:null,frontBar:null,percentage:null,assets:null,initialized:!1,create:function(b,c){this.initialized||(this.assets=c,this.maxWidth=a.canvas.width/2,this.backBar=a.rectangle(this.maxWidth,32,this.backgroundColor),this.backBar.x=a.canvas.width/2-this.maxWidth/2,this.backBar.y=a.canvas.height/2-16,this.frontBar=a.rectangle(this.maxWidth,32,this.foregroundColor),this.frontBar.x=a.canvas.width/2-this.maxWidth/2,this.frontBar.y=a.canvas.height/2-16,this.percentage=a.text("0%","28px sans-serif","black"),this.percentage.x=a.canvas.width/2-this.maxWidth/2+12,this.percentage.y=a.canvas.height/2-12,this.initialized=!0)},update:function(){var b=(a.assets.loaded+1)/a.assets.toLoad;this.frontBar.width=this.maxWidth*b,this.percentage.content=Math.floor(100*b)+"%"},remove:function(){a.remove(this.frontBar),a.remove(this.backBar),a.remove(this.percentage)}},a.particles=[],a.particleEffect=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(e){var g=d();g.frames.length>0&&g.gotoAndStop(w(0,g.frames.length-1)),g.x=b-g.halfWidth,g.y=c-g.halfHeight;var h=w(j,k);g.width=h,g.height=h,g.scaleSpeed=v(n,o),g.alphaSpeed=v(p,q),g.rotationSpeed=v(r,s);var i=v(l,m);g.vx=i*Math.cos(e),g.vy=i*Math.sin(e),g.updateParticle=function(){g.vy+=f,g.x+=g.vx,g.y+=g.vy,g.scaleX-g.scaleSpeed>0&&(g.scaleX-=g.scaleSpeed),g.scaleY-g.scaleSpeed>0&&(g.scaleY-=g.scaleSpeed),g.rotation+=g.rotationSpeed,g.alpha-=g.alphaSpeed,g.alpha<=0&&(a.remove(g),a.particles.splice(a.particles.indexOf(g),1))},a.particles.push(g)}void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=function(){return a.circle(10,"red")}),void 0===e&&(e=10),void 0===f&&(f=0),void 0===g&&(g=!0),void 0===h&&(h=0),void 0===i&&(i=6.28),void 0===j&&(j=4),void 0===k&&(k=16),void 0===l&&(l=.1),void 0===m&&(m=1),void 0===n&&(n=.01),void 0===o&&(o=.05),void 0===p&&(p=.02),void 0===q&&(q=.02),void 0===r&&(r=.01),void 0===s&&(s=.03);for(var u,v=function(a,b){return a+Math.random()*(b-a)},w=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},x=[],y=(i-h)/(e-1),z=0;e>z;z++)g?(u=v(h,i),x.push(u)):(void 0===u&&(u=h),x.push(u),u+=y);x.forEach(function(a){t(a)})},a.updateParticles=function(){if(a.particles.length>0)for(var b=a.particles.length-1;b>=0;b--){var c=a.particles[b];c.updateParticle()}},a.updateFunctions.push(a.updateParticles),a.emitter=function(a,b){function c(){f.playing||(b(),g=setInterval(e.bind(this),a),f.playing=!0)}function d(){f.playing&&(clearInterval(g),f.playing=!1)}function e(){b()}var f={},g=void 0;return f.playing=!1,f.play=c,f.stop=d,f},a.tilingSprite=function(b,c,d,e,f){void 0===e&&(e=0),void 0===f&&(f=0);var g,h;a.assets[d].frame?(g=a.assets[d].frame.w,h=a.assets[d].frame.h):(g=a.assets[d].width,h=a.assets[d].height);var i,j;i=b>=g?Math.round(b/g)+1:2,j=c>=h?Math.round(c/h)+1:2;var k=a.grid(i,j,g,h,!1,0,0,function(){var b=a.sprite(d);return b});k._tileX=0,k._tileY=0;var l=a.rectangle(b,c,"none","none");return l.x=e,l.y=f,l.mask=!0,l.addChild(k),Object.defineProperties(l,{tileX:{get:function(){return k._tileX},set:function(a){k.children.forEach(function(b){var c=a-k._tileX;b.x+=c,b.x>(i-1)*g&&(b.x=0-g+c),b.x<0-g-c&&(b.x=(i-1)*g)}),k._tileX=a},enumerable:!0,configurable:!0},tileY:{get:function(){return k._tileY},set:function(a){k.children.forEach(function(b){var c=a-k._tileY;b.y+=c,b.y>(j-1)*h&&(b.y=0-h+c),b.y<0-h-c&&(b.y=(j-1)*h)}),k._tileY=a},enumerable:!0,configurable:!0}}),l},a.burst=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){var e=d();e.x=b-e.halfWidth,e.y=c-e.halfHeight;var p=a.randomFloat(f,g);e.width=p,e.height=p,e.scaleSpeed=a.randomFloat(j,k),e.alphaSpeed=a.randomFloat(l,m),e.rotationSpeed=a.randomFloat(n,o);var r=a.randomFloat(h,i);e.vx=r*Math.cos(q*Math.PI/180),e.vy=r*Math.sin(q*Math.PI/180),e.update=function(){e.x+=e.vx,e.y+=e.vy,e.scaleX-e.scaleSpeed>0&&(e.scaleX-=e.scaleSpeed),e.scaleY-e.scaleSpeed>0&&(e.scaleY-=e.scaleSpeed),e.rotation+=e.rotationSpeed,e.alpha-=e.alphaSpeed,e.alpha<=0&&(a.remove(e),a.particles.splice(a.particles.indexOf(e),1))},a.particles.push(e)}b=b||0,c=c||0,d=d||function(){return a.circle(10,"red")},f=f||4,g=g||16,e=e||10,h=h||.1,i=i||1,j=j||.01,k=k||.05,l=l||.02,m=m||.02,n=n||.01,o=o||.03;var q;for(q=0;360>q;q+=Math.round(360/e))p()},a.outsideBounds=function(a,b,c){var d,e=b.x,f=b.y,g=b.width,h=b.height;return a.x<e-a.width&&(d="left"),a.y<f-a.height&&(d="top"),a.x>g&&(d="right"),a.y>h&&(d="bottom"),d&&c&&c(d),d},a.contain=function(a,b,c,d){var e=b.x,f=b.y,g=b.width,h=b.height;c=c||!1;var i;return a.x<e&&(c&&(a.vx*=-1),a.mass&&(a.vx/=a.mass),a.x=e,i="left"),a.y<f&&(c&&(a.vy*=-1),a.mass&&(a.vy/=a.mass),a.y=f,i="top"),a.x+a.width>g&&(c&&(a.vx*=-1),a.mass&&(a.vx/=a.mass),a.x=g-a.width,i="right"),a.y+a.height>h&&(c&&(a.vy*=-1),a.mass&&(a.vy/=a.mass),a.y=h-a.height,i="bottom"),i&&d&&d(i),i},a.hitTestPoint=function(a,b){var c,d,e,f,g,h,i,j,k;return c=b.radius?"circle":"rectangle","rectangle"===c&&(d=b.x,e=b.x+b.width,f=b.y,g=b.y+b.height,k=a.x>d&&a.x<e&&a.y>f&&a.y<g),"circle"===c&&(h=a.x-b.centerX,i=a.y-b.centerY,j=Math.sqrt(h*h+i*i),k=j<b.radius),k},a.hitTestCircle=function(a,b,c){var d,e,f,g,h;return void 0===c&&(c=!1),c?(d=b.gx+b.radius-(a.gx+a.radius),e=b.gy+b.radius-(a.gy+a.radius)):(d=b.centerX-a.centerX,e=b.centerY-a.centerY),f=Math.sqrt(d*d+e*e),g=a.radius+b.radius,h=g>f},a.hitTestRectangle=function(a,b,c){var d,e,f,g,h;return void 0===c&&(c=!1),d=!1,c?(g=a.gx+a.halfWidth-(b.gx+b.halfWidth),h=a.gy+a.halfHeight-(b.gy+b.halfHeight)):(g=a.centerX-b.centerX,h=a.centerY-b.centerY),e=a.halfWidth+b.halfWidth,f=a.halfHeight+b.halfHeight,d=Math.abs(g)<e&&Math.abs(h)<f?!0:!1},a.hitTestCircleRectangle=function(b,c,d){var e,f,g,h,i,j;if(void 0===d&&(d=!1),d?(g=b.gx,h=b.gy,i=c.gx,j=c.gy):(g=b.x,h=b.y,i=c.x,j=c.y),e=h<j-c.halfHeight?g<i-1-c.halfWidth?"topLeft":g>i+1+c.halfWidth?"topRight":"topMiddle":h>j+c.halfHeight?g<i-1-c.halfWidth?"bottomLeft":g>i+1+c.halfWidth?"bottomRight":"bottomMiddle":g<i-c.halfWidth?"leftMiddle":"rightMiddle","topMiddle"===e||"bottomMiddle"===e||"leftMiddle"===e||"rightMiddle"===e)f=a.hitTestRectangle(b,c,d);else{var k={};switch(e){case"topLeft":k.x=i,k.y=j;break;case"topRight":k.x=i+c.width,k.y=j;break;case"bottomLeft":k.x=i,k.y=j+c.height;break;case"bottomRight":k.x=i+c.width,k.y=j+c.height}f=a.hitTestCirclePoint(b,k,d)}return f?e:f},a.hitTestCirclePoint=function(b,c,d){return void 0===d&&(d=!1),c.diameter=1,c.radius=.5,c.centerX=c.x,c.centerY=c.y,c.gx=c.x,c.gy=c.y,a.hitTestCircle(b,c,d)},a.rectangleCollision=function(a,b,c,d){var e,f,g,h,i,j,k;return void 0===c&&(c=!1),void 0===d&&(d=!1),d?(j=a.gx+a.halfWidth-(b.gx+b.halfWidth),k=a.gy+a.halfHeight-(b.gy+b.halfHeight)):(j=a.centerX-b.centerX,k=a.centerY-b.centerY),f=a.halfWidth+b.halfWidth,g=a.halfHeight+b.halfHeight,Math.abs(j)<f&&Math.abs(k)<g&&(h=f-Math.abs(j),i=g-Math.abs(k),h>=i?(k>0?(e="top",a.y=a.y+i):(e="bottom",a.y=a.y-i),c&&(a.vy*=-1)):(j>0?(e="left",a.x=a.x+h):(e="right",a.x=a.x-h),c&&(a.vx*=-1))),e},a.circleCollision=function(a,b,d,e){var f,g,h,i,j,k,l,m={},n=!1;if(void 0===d&&(d=!0),void 0===e&&(e=!1),e?(i=b.gx+b.radius-(a.gx+a.radius),j=b.gy+b.radius-(a.gy+a.radius)):(i=b.centerX-a.centerX,j=b.centerY-a.centerY),f=Math.sqrt(i*i+j*j),g=a.radius+b.radius,g>f){n=!0,h=g-f;var o=.3;h+=o,k=i/f,l=j/f,a.x-=h*k,a.y-=h*l,d&&(m.x=j,m.y=-i,c(a,m))}return n},a.movingCircleCollision=function(a,b,c){var d,e,f,g,h={},i={},j={},k={},l={},m=!1;if(a.mass=a.mass||1,b.mass=b.mass||1,void 0===c&&(c=!1),c?(h.vx=b.gx+b.radius-(a.gx+a.radius),h.vy=b.gy+b.radius-(a.gy+a.radius)):(h.vx=b.centerX-a.centerX,h.vy=b.centerY-a.centerY),h.magnitude=Math.sqrt(h.vx*h.vx+h.vy*h.vy),d=a.radius+b.radius,h.magnitude<d){m=!0,e=d-h.magnitude,e+=.3,h.dx=h.vx/h.magnitude,h.dy=h.vy/h.magnitude,h.vxHalf=Math.abs(h.dx*e/2),h.vyHalf=Math.abs(h.dy*e/2),f=a.x>b.x?1:-1,g=a.y>b.y?1:-1,a.x=a.x+h.vxHalf*f,a.y=a.y+h.vyHalf*g,b.x=b.x+h.vxHalf*-f,b.y=b.y+h.vyHalf*-g,h.lx=h.vy,h.ly=-h.vx;var n=a.vx*h.dx+a.vy*h.dy;i.x=n*h.dx,i.y=n*h.dy;var o=a.vx*(h.lx/h.magnitude)+a.vy*(h.ly/h.magnitude);j.x=o*(h.lx/h.magnitude),j.y=o*(h.ly/h.magnitude);var p=b.vx*h.dx+b.vy*h.dy;k.x=p*h.dx,k.y=p*h.dy;var q=b.vx*(h.lx/h.magnitude)+b.vy*(h.ly/h.magnitude);l.x=q*(h.lx/h.magnitude),l.y=q*(h.ly/h.magnitude),a.bounce={},a.bounce.x=j.x+k.x,a.bounce.y=j.y+k.y,b.bounce={},b.bounce.x=i.x+l.x,b.bounce.y=i.y+l.y,a.vx=a.bounce.x/a.mass,a.vy=a.bounce.y/a.mass,b.vx=b.bounce.x/b.mass,b.vy=b.bounce.y/b.mass}return m},a.multipleCircleCollision=function(b,c){void 0===c&&(c=!1);for(var d=0;d<b.length;d++)for(var e=b[d],f=d+1;f<b.length;f++){var g=b[f];a.movingCircleCollision(e,g,c)}},a.circlePointCollision=function(b,c,d,e){return void 0===e&&(e=!1),void 0===d&&(d=!1),c.diameter=1,c.radius=.5,c.centerX=c.x,c.centerY=c.y,c.gx=c.x,c.gy=c.y,a.circleCollision(b,c,d,e)},a.circleRectangleCollision=function(b,c,d,e){var f,g,h,i,j,k;if(void 0===e&&(e=!1),void 0===d&&(d=!1),e?(h=b.gx,i=b.gy,j=c.gx,k=c.gy):(h=b.x,i=b.y,j=c.x,k=c.y),f=i<k-c.halfHeight?h<j-1-c.halfWidth?"topLeft":h>j+1+c.halfWidth?"topRight":"topMiddle":i>k+c.halfHeight?h<j-1-c.halfWidth?"bottomLeft":h>j+1+c.halfWidth?"bottomRight":"bottomMiddle":h<j-c.halfWidth?"leftMiddle":"rightMiddle","topMiddle"===f||"bottomMiddle"===f||"leftMiddle"===f||"rightMiddle"===f)g=a.rectangleCollision(b,c,d,e);else{var l={};switch(f){case"topLeft":l.x=j,l.y=k;break;case"topRight":l.x=j+c.width,l.y=k;break;case"bottomLeft":l.x=j,l.y=k+c.height;break;case"bottomRight":l.x=j+c.width,l.y=k+c.height}g=a.circlePointCollision(b,l,d,e)}return g?f:g},a.hit=function(b,c,d,e,f,g){function h(b,c){var d=void 0!==b.parent,e=void 0!==c.parent;if(d&&e)return b.diameter&&c.diameter?j(b,c):b.diameter&&!c.diameter?l(b,c):k(b,c);if(e&&void 0!==b.x&&void 0!==b.y)return a.hitTestPoint(b,c);throw new Error("I'm sorry, "+b+" and "+c+" cannot be use together in a collision test.")}function i(){if(b instanceof Array){var a=b;c=b,b=a}for(var d=c.length-1;d>=0;d--){var e=c[d];m=h(b,e),m&&g&&g(m,e)}}function j(b,c){return d?b.vx+b.vy!==0&&c.vx+c.vy!==0?a.movingCircleCollision(b,c,f):a.circleCollision(b,c,e,f):a.hitTestCircle(b,c,f)}function k(b,c){return d?e?a.rectangleCollision(b,c,!0,f):a.rectangleCollision(b,c,!1,f):a.hitTestRectangle(b,c,f)}function l(b,c){return d?a.circleRectangleCollision(b,c,e,f):a.hitTestCircleRectangle(b,c,f)}var m;return d=d||!1,e=e||!1,f=f||!1,c instanceof Array||b instanceof Array?i():(m=h(b,c),m&&g&&g(m)),m},a.getIndex=function(a,b,c,d,e){var f={};return f.x=Math.floor(a/c),f.y=Math.floor(b/d),f.x+f.y*e},a.getTile=function(a,b,c){var d={};return d.gid=b[a],d.width=c.tilewidth,d.height=c.tileheight,d.halfWidth=c.tilewidth/2,d.halfHeight=c.tileheight/2,d.x=a%c.widthInTiles*c.tilewidth+c.x,d.y=Math.floor(a/c.widthInTiles)*c.tileheight+c.y,d.gx=d.x,d.gy=d.y,d.centerX=d.x+c.tilewidth/2,d.centery=d.y+c.tileheight/2,d},a.surroundingCells=function(a,b){return[a-b-1,a-b,a-b+1,a-1,a,a+1,a+b-1,a+b,a+b+1]},a.getPoints=function(a){var b=a.collisionArea;return void 0!==b?{topLeft:{x:a.x+b.x,y:a.y+b.y},topRight:{x:a.x+b.x+b.width,y:a.y+b.y},bottomLeft:{x:a.x+b.x,y:a.y+b.y+b.height},bottomRight:{x:a.x+b.x+b.width,y:a.y+b.y+b.height}}:{topLeft:{x:a.x,y:a.y},topRight:{x:a.x+a.width-1,y:a.y},bottomLeft:{x:a.x,y:a.y+a.height-1},bottomRight:{x:a.x+a.width-1,y:a.y+a.height-1}}},a.hitTestTile=function(b,c,d,e,f){function g(f){var g=b.collisionPoints[f];return h.index=a.getIndex(g.x,g.y,e.tilewidth,e.tileheight,e.widthInTiles),h.gid=c[h.index],h.gid===d?!0:!1}f=f||"some";var h={};switch(f){case"center":var i={center:{x:b.centerX,y:b.centerY}};b.collisionPoints=i,h.hit=Object.keys(b.collisionPoints).some(g);break;case"every":b.collisionPoints=a.getPoints(b),h.hit=Object.keys(b.collisionPoints).every(g);break;case"some":b.collisionPoints=a.getPoints(b),h.hit=Object.keys(b.collisionPoints).some(g)}return h},a.updateMap=function(b,c,d){var e=b.map(function(a){return a=0});if(c instanceof Array)c.forEach(function(b){b.index=a.getIndex(b.centerX,b.centerY,d.tilewidth,d.tileheight,d.widthInTiles),e[b.index]=b.gid});else{var f=c;f.index=a.getIndex(f.centerX,f.centerY,d.tilewidth,d.tileheight,d.widthInTiles),e[f.index]=f.gid}return e},a.fourKeyController=function(b,c,d,e,f,g){b.direction="",leftArrow=a.keyboard(g),upArrow=a.keyboard(d),rightArrow=a.keyboard(e),downArrow=a.keyboard(f),leftArrow.press=function(){b.vx=-c,b.vy=0,b.direction="left"},leftArrow.release=function(){rightArrow.isDown||0!==b.vy||(b.vx=0)},upArrow.press=function(){b.vy=-c,b.vx=0,b.direction="up"},upArrow.release=function(){downArrow.isDown||0!==b.vx||(b.vy=0)},rightArrow.press=function(){b.vx=c,b.vy=0,b.direction="right"},rightArrow.release=function(){leftArrow.isDown||0!==b.vy||(b.vx=0)},downArrow.press=function(){b.vy=c,b.vx=0,b.direction="down"},downArrow.release=function(){upArrow.isDown||0!==b.vx||(b.vy=0)}},a.makeTiledWorld=function(b,c){b=a.json(b);var d=a.group();d.tileheight=b.tileheight,d.tilewidth=b.tilewidth,d.width=b.width*b.tilewidth,d.height=b.height*b.tileheight,d.widthInTiles=b.width,d.heightInTiles=b.height,d.objects=[];var e=b.tilesets[0].spacing,f=Math.floor(b.tilesets[0].imagewidth/(b.tilewidth+e));return b.layers.forEach(function(g){var h=a.group();Object.keys(g).forEach(function(a){"width"!==a&&"height"!==a&&(h[a]=g[a])}),h.alpha=g.opacity,d.addChild(h),d.objects.push(h),"tilelayer"===g.type&&g.data.forEach(function(g,i){var j,k,l,m,n,o,p,q,r,s;if(0!==g){p=i%d.widthInTiles,q=Math.floor(i/d.widthInTiles),l=p*d.tilewidth,m=q*d.tileheight,r=(g-1)%f,s=Math.floor((g-1)/f),n=r*d.tilewidth,o=s*d.tileheight,e>0&&(n+=e+e*((g-1)%f),o+=e+e*Math.floor((g-1)/f)),k=a.frame(c,n,o,d.tilewidth,d.tileheight);var t=b.tilesets[0].tileproperties,u=String(g-1);t[u]&&t[u].name?(j=a.sprite(k),Object.keys(t[u]).forEach(function(a){j[a]=t[u][a]}),d.objects.push(j)):j=a.sprite(k),j.x=l,j.y=m,j.index=i,j.gid=g,h.addChild(j)}}),"objectgroup"===g.type&&g.objects.forEach(function(a){a.group=h,h.width=d.width,h.height=d.height,d.objects.push(a)})}),d.getObject=function(a){return this.searchForObject=function(){var b;return d.objects.some(function(c){return c.name&&c.name===a?(b=c,!0):void 0}),b?b:void console.log("There is no object with the property name: "+a)},this.searchForObject()},d.getObjects=function(){var a=Array.prototype.slice.call(arguments),b=[];return d.objects.forEach(function(c){c.name&&-1!==a.indexOf(c.name)&&b.push(c)}),b.length>0?b:(console.log("I could not find those objects"),b)},d},a.fullscreenScale=1,a.requestFullScreen=function(){document.fullscreenEnabled||a.canvas.requestFullscreen()},a.exitFullScreen=function(){document.fullscreenEnabled&&document.exitFullscreen()},a.alignFullscreen=function(){var b,c;b=screen.width/a.canvas.width,c=screen.height/a.canvas.height,a.fullscreenScale=Math.min(b,c);var d=document.styleSheets;if(0===d.length){var e=document.createElement("div");e.innerHTML="<style></style>",document.body.appendChild(e)}var f=navigator.userAgent.toLowerCase();a.canvas.width>a.canvas.height?-1!==f.indexOf("safari")||-1!==f.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain}",0):-1!==f.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==f.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==f.indexOf("explorer")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==f.indexOf("safari")||-1!==f.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==f.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==f.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==f.indexOf("msie")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {height: 100%; margin: 0 auto; object-fit: contain;}",0);

},a.enableFullscreen=function(b){b&&(b=Array.prototype.slice.call(arguments)),a.alignFullscreen(),a.canvas.addEventListener("mouseup",a.requestFullScreen,!1),a.canvas.addEventListener("touchend",a.requestFullScreen,!1),b&&b.forEach(function(b){window.addEventListener("keyup",function(c){c.keyCode===b&&a.exitFullScreen(),c.preventDefault()},!1)})},a.launchFullscreen=function(b){a.hitTestPoint(a.pointer.position,b)&&a.enableFullscreen()},a.scaleFullscreen=function(){document.fullscreenEnabled?(a.scale=a.fullscreenScale,a.pointer.scale=a.fullscreenScale):a.canvas.scaled||(a.scale=1,a.pointer.scale=1)},a.updateFunctions.push(a.scaleFullscreen),a.actx=new AudioContext,a.makeSound=function(b,c){var d={},e=a.actx;return d.volumeNode=a.actx.createGain(),d.panNode=e.createStereoPanner?e.createStereoPanner():e.createPanner(),d.delayNode=e.createDelay(),d.feedbackNode=e.createGain(),d.filterNode=e.createBiquadFilter(),d.convolverNode=e.createConvolver(),d.soundNode=null,d.buffer=null,d.source=null,d.loop=!1,d.playing=!1,d.loadHandler=void 0,d.panValue=0,d.volumeValue=1,d.startTime=0,d.startOffset=0,d.playbackRate=1,d.echo=!1,d.delayValue=.3,d.feebackValue=.3,d.filterValue=0,d.reverb=!1,d.reverbImpulse=null,d.play=function(){d.startTime=e.currentTime,d.soundNode=e.createBufferSource(),d.soundNode.buffer=d.buffer,d.soundNode.playbackRate.value=this.playbackRate,d.soundNode.connect(d.volumeNode),d.reverb===!1?d.volumeNode.connect(d.panNode):(d.volumeNode.connect(d.convolverNode),d.convolverNode.connect(d.panNode),d.convolverNode.buffer=d.reverbImpulse),d.panNode.connect(e.destination),d.echo&&(d.feedbackNode.gain.value=d.feebackValue,d.delayNode.delayTime.value=d.delayValue,d.filterNode.frequency.value=d.filterValue,d.delayNode.connect(d.feedbackNode),d.filterValue>0?(d.feedbackNode.connect(d.filterNode),d.filterNode.connect(d.delayNode)):d.feedbackNode.connect(d.delayNode),d.volumeNode.connect(d.delayNode),d.delayNode.connect(d.panNode)),d.soundNode.loop=d.loop,d.soundNode.start(0,d.startOffset%d.buffer.duration),d.playing=!0},d.pause=function(){d.playing&&(d.soundNode.stop(0),d.startOffset+=e.currentTime-d.startTime,d.playing=!1)},d.restart=function(){d.playing&&d.soundNode.stop(0),d.startOffset=0,d.play()},d.playFrom=function(a){d.playing&&d.soundNode.stop(0),d.startOffset=a,d.play()},d.setEcho=function(a,b,c){void 0===a&&(a=.3),void 0===b&&(b=.3),void 0===c&&(c=0),d.delayValue=a,d.feebackValue=b,d.filterValue=c,d.echo=!0},d.setReverb=function(b,c,f){void 0===b&&(b=2),void 0===c&&(c=2),void 0===f&&(f=!1),d.reverbImpulse=a.impulseResponse(b,c,f,e),d.reverb=!0},d.fade=function(a,b){d.playing&&(d.volumeNode.gain.linearRampToValueAtTime(d.volumeNode.gain.value,e.currentTime),d.volumeNode.gain.linearRampToValueAtTime(a,e.currentTime+b))},d.fadeIn=function(a){d.volumeNode.gain.value=0,d.fade(1,a)},d.fadeOut=function(a){d.fade(0,a)},Object.defineProperties(d,{volume:{get:function(){return d.volumeValue},set:function(a){d.volumeNode.gain.value=a,d.volumeValue=a},enumerable:!0,configurable:!0},pan:{get:function(){return e.createStereoPanner?d.panNode.pan.value:d.panValue},set:function(a){if(e.createStereoPanner)d.panNode.pan.value=a;else{var b=a,c=0,f=1-Math.abs(b);d.panNode.setPosition(b,c,f),d.panValue=a}},enumerable:!0,configurable:!0}}),d.load=function(){var a=new XMLHttpRequest;a.open("GET",b,!0),a.responseType="arraybuffer",a.addEventListener("load",function(){e.decodeAudioData(a.response,function(a){d.buffer=a,d.hasLoaded=!0,c&&c()},function(a){throw new Error("Audio could not be decoded: "+a)})}),a.send()},d.load(),d},a.sound=function(b){return a.assets[b]},a.soundEffect=function(b,c,d,e,f,g,h,i,j,k,l,m,n){function o(b){var c=y.createConvolver();c.buffer=a.impulseResponse(n[0],n[1],n[2],y),b.connect(c),c.connect(x)}function p(a){var b=y.createGain(),c=y.createDelay(),d=y.createBiquadFilter();c.delayTime.value=m[0],b.gain.value=m[1],m[2]&&(d.frequency.value=m[2]),c.connect(b),m[2]?(b.connect(d),d.connect(c)):b.connect(c),a.connect(c),c.connect(x)}function q(a){a.gain.value=0,a.gain.linearRampToValueAtTime(0,y.currentTime+h),a.gain.linearRampToValueAtTime(f,y.currentTime+h+c)}function r(a){a.gain.linearRampToValueAtTime(f,y.currentTime+c+h),a.gain.linearRampToValueAtTime(0,y.currentTime+h+c+d)}function s(a){var b=a.frequency.value;j?(a.frequency.linearRampToValueAtTime(b,y.currentTime+h),a.frequency.linearRampToValueAtTime(b+i,y.currentTime+h+c+d)):(a.frequency.linearRampToValueAtTime(b,y.currentTime+h),a.frequency.linearRampToValueAtTime(b-i,y.currentTime+h+c+d))}function t(){var a=y.createOscillator(),b=y.createOscillator(),e=y.createGain(),g=y.createGain();e.gain.value=f,g.gain.value=f,a.connect(e),e.connect(y.destination),b.connect(g),g.connect(y.destination),a.type="sawtooth",b.type="sawtooth",a.frequency.value=z+l,b.frequency.value=z-l,c>0&&(q(e),q(g)),d>0&&(r(e),r(g)),i>0&&(s(a),s(b)),m&&(p(e),p(g)),n&&(o(e),o(g)),u(a),u(b)}function u(a){a.start(y.currentTime+h)}void 0===b&&(b=200),void 0===c&&(c=0),void 0===d&&(d=1),void 0===e&&(e="sine"),void 0===f&&(f=1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=0),void 0===j&&(j=!1),void 0===k&&(k=0),void 0===l&&(l=0),void 0===m&&(m=void 0),void 0===n&&(n=void 0);var v,w,x,y=a.actx;v=y.createOscillator(),w=y.createGain(),x=y.createStereoPanner?y.createStereoPanner():y.createPanner(),v.connect(w),w.connect(x),x.connect(y.destination),w.gain.value=f,y.createStereoPanner?x.pan.value=g:x.setPosition(g,0,1-Math.abs(g)),v.type=e;var z,A=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};z=k>0?A(b-k/2,b+k/2):b,v.frequency.value=z,c>0&&q(w),r(w),i>0&&s(v),m&&p(w),n&&o(w),l>0&&t(),u(v)},a.impulseResponse=function(a,b,c,d){for(var e=d.sampleRate*a,f=d.createBuffer(2,e,d.sampleRate),g=f.getChannelData(0),h=f.getChannelData(1),i=0;e>i;i++){var j;j=c?e-i:i,g[i]=(2*Math.random()-1)*Math.pow(1-j/e,b),h[i]=(2*Math.random()-1)*Math.pow(1-j/e,b)}return f}};
//# sourceMappingURL=plugins.min.js.map